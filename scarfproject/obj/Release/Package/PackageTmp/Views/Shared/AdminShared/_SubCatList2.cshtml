@model AdminPanel.ViewModel.CatPageViewModel

@{
    if (Model.levelfinder == "def") {
        if (Model.Cats.Count() > 0)
        {
             <label class="control-label component ">
        منو 3 :
    </label>
    <div class="component">
    @Html.DropDownListFor(m => m.SelectedCat, Model.Cats, "--", new { id = "subcatslistlevel2", style = "width:100%; min-width:185px", onchange = "setglobalsubcatid(subcatslist)"  })
</div>
    <script>

        function setglobalsubcatid(subcatslistlevel2) {
            var selectedValue = subcatslistlevel2.value;

            $.ajax({
                url: '/Admin/getsubcatlistlevel3',
                dataType: 'html',
                data: {
                    subcatid: selectedValue,
                    levelfinder : "def"

                },
                success: function (data) {

                    

                },
                error: function () {
                   
                }
            });
        }


    </script>
        }
        
    }
    else if(Model.levelfinder == "chg") 
    {
       
             <label class="control-label component ">
                    منو 3 :
                </label>
                <div class="component">
                    @Html.DropDownListFor(m => m.SelectedCat, Model.Cats, "--", new { id = "subcatslist2forchange", style = "width:100%; min-width:135px", onchange = "setglobalsubcatid(subcatslist2)" })
                </div>
                <script>

                    $("#subcatslistforchangelevel2").change(function () {
                        var selectedValue = this.value;

                        $.ajax({
                            url: '/Admin/getsubcatlistlevel3',
                            dataType: 'html',
                            data: {
                                subcatid: selectedValue,
                                levelfinder: "chg"
                            },
                            success: function (data) {



                            },
                            error: function () {

                            }
                        });

                        
                    })
    


                </script>
    
                @*<div id="subcat2holderforedit" class="component">
   
                </div>*@
        
    }
    else if (Model.levelfinder == "del") { 
        

                <label class="control-label component ">
                    منو 3 :
                </label>
                <div class="component">
                    @Html.DropDownListFor(m => m.SelectedCat, Model.Cats, "--", new { id = "subcatslist2fordel", style = "width:100%; min-width:135px", onchange = "setglobalsubcatid(subcatslist2)" })
                </div>
                <script>

                    $("#subcatslistfordeletelevel2").change(function () {
                        var selectedValue = this.value;

                        $.ajax({
                            url: '/Admin/getsubcatlistlevel3',
                            dataType: 'html',
                            data: {
                                subcatid: selectedValue,
                                levelfinder:"del"
                            },
                            success: function (data) {



                            },
                            error: function () {

                            }
                        });

                        //$.ajax({
                        //    url: '/Admin/getsubcatlist2',
                        //    dataType: 'html',
                        //    data: {
                        //        subcatid: selectedValue,
                        //        levelfinder : "del",
                        //    },
                        //    success: function (data) {

                        //        $('#subcat2holderforedelete').html(data);


                        //    },
                        //    error: function () {
                        //        alert("nashod")
                        //    }
                        //});
                    })
    


                </script>
            <div id="subcat2holderforedelete" class="component">

            </div>
    }
     else if (Model.levelfinder == "list") { 
        

                <label class="control-label component ">
                    منو 3 :
                </label>
                <div class="component">
                    @Html.DropDownListFor(m => m.SelectedCat, Model.Cats, "--", new { id = "subcatslist2fordel", style = "width:100%; min-width:135px", onchange = "setglobalsubcatid(subcatslist2)" })
                </div>
                <script>

                    $("#subcatslistfordeletelevel2").change(function () {
                        var selectedValue = this.value;

                        $.ajax({
                            url: '/Admin/getsubcatlistlevel3',
                            dataType: 'html',
                            data: {
                                subcatid: selectedValue,
                                levelfinder: "list"
                            },
                            success: function (data) {



                            },
                            error: function () {

                            }
                        });

                        //$.ajax({
                        //    url: '/Admin/getsubcatlist2',
                        //    dataType: 'html',
                        //    data: {
                        //        subcatid: selectedValue,
                        //        levelfinder : "del",
                        //    },
                        //    success: function (data) {

                        //        $('#subcat2holderforedelete').html(data);


                        //    },
                        //    error: function () {
                        //        alert("nashod")
                        //    }
                        //});
                    })
    


                </script>
            <div id="subcat2holderforedelete" class="component">

            </div>
    }
}


   


    


